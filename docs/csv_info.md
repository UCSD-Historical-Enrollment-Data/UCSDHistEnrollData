[← Go Back](https://github.com/ewang2002/UCSDHistEnrollData)

# CSV Information
Each data repository will contain numerous CSV files. Generally, each data point will contain a time and information regarding the number of students enrolled, waitlisted, as well as the number of available seats, during that time. 

As of mid August, I've collected approximately 70 **raw** million data points for ~2000 courses and 5 terms. Note that this is across *all* courses and *all* terms; it is **not** 70 million per course.

## CSV Structure
In each data repository, there are two types of CSV files:
- Raw CSV files, located in the `raw` directory.
- Cleaned CSV files for 
    - courses, located in the `overall` directory.
    - sections, located in the `section` directory.

⚠️ The CSV headers described below may not apply to Spring 2022 data sets. In particular, the Spring 2022 CSV files do not have the number of students enrolled in a class, only the number of seats available. Spring 2022 was when this project started, and the quarter itself was a testing quarter. 

### Raw CSV Files
These are CSV files that just contain data for all courses, ordered by collection time. These CSV files are generated by my scraper. This is ideal if you want to do your own data processing, as this allows you to decide how you want to represent the data. The CSV columns are:

| Column Name | Column Purpose |
| ----------- | -------------- |
| `time` | The time when this data point was collected, represented as [Unix time](https://en.wikipedia.org/wiki/Unix_time). |
| `subj_course_id` | The subject course number ID. For example, `CSE 100`. |
| `sec_code` | The section code. For example, `A01`. |
| `sec_id` | The section ID. For example, `085689`. |
| `prof` | The instructor, in the form `Last; First Middle` (where `Middle` is optional) **or** `Staff`. |
| `available` | The number of seats *available* for enrollment. This is the exact number shown on WebReg at the time. | 
| `waitlist` | The number of students waitlisted for this section. This is the exact number shown on WebReg at the time. | 
| `total` | The total number of seats available. This is the exact number shown on WebReg at the time. | 
| `enrolled_ct` | The number of students enrolled in this section. This always shows the real number of students enrolled (as opposed to `available`). This is not shown on WebReg. |


<details>
<summary>Click here for an example.</summary>
<br> 

```
time,subj_course_id,sec_code,sec_id,prof,available,waitlist,total,enrolled_ct
1661599357060,AAS 10,A01,085689,Butler; Elizabeth Annette,0,10,34,34
1661599357060,AAS 10,A02,085690,Butler; Elizabeth Annette,0,10,34,34
1661599357513,AAS 170,A00,085691,Butler; Elizabeth Annette,17,0,32,15
1661599357966,AIP 197,001,085683,Staff,100,0,100,0
1661599357966,AIP 197,002,085684,Rao; Ramesh R,50,0,50,0
1661599357966,AIP 197,003,106411,Toda; Alexis Akira,9999,0,9999,0
1661599357966,AIP 197,004,106536,Wixted; John T,9999,0,9999,0
1661599357966,AIP 197,005,106554,Kiyonaga; Anastasia,9999,0,9999,0
... (omitted for brevity)
1661599470129,CSE 100,A01,090033,Moshiri; Alexander Niema,0,8,189,189
1661599470577,CSE 100R,A01,093837,Moshiri; Alexander Niema,155,0,350,195
1661599471025,CSE 101,A01,090035,Saha; Barna & Jones; Miles E,0,25,395,395
1661599471474,CSE 103,A01,090037,Freund; Yoav,0,10,75,75
1661599471923,CSE 105,A01,090039,Micciancio; Daniele,86,0,350,264
... (omitted for brevity)
1661599927010,AAS 10,A01,085689,Butler; Elizabeth Annette,0,10,34,34
1661599927010,AAS 10,A02,085690,Butler; Elizabeth Annette,0,10,34,34
1661599927455,AAS 170,A00,085691,Butler; Elizabeth Annette,17,0,32,15
1661599927907,AIP 197,001,085683,Staff,100,0,100,0
1661599927907,AIP 197,002,085684,Rao; Ramesh R,50,0,50,0
1661599927907,AIP 197,003,106411,Toda; Alexis Akira,9999,0,9999,0
1661599927907,AIP 197,004,106536,Wixted; John T,9999,0,9999,0
1661599927907,AIP 197,005,106554,Kiyonaga; Anastasia,9999,0,9999,0
... (omitted for brevity)
1661600039372,CSE 100,A01,090033,Moshiri; Alexander Niema,0,8,189,189
1661600039820,CSE 100R,A01,093837,Moshiri; Alexander Niema,155,0,350,195
1661600040268,CSE 101,A01,090035,Saha; Barna & Jones; Miles E,0,25,395,395
1661600040713,CSE 103,A01,090037,Freund; Yoav,0,10,75,75
1661600041163,CSE 105,A01,090039,Micciancio; Daniele,86,0,350,264
... (omitted for brevity, but you get the point)
```

These CSV files will always be located in the `raw` folder.

</details>

### Merged CSV Files
As part of the data cleaning process, one thing I (inefficiently) do is merge all raw CSV files into one giant CSV file. Depending on the number of CSV files, this can be a huge file.

Because these files are often bigger than 100 MB (GitHub's per-file size limit), these will not be checked into Git. 

This will always be one CSV file, usually located in a folder called `cleaned`. 

### Cleaned CSV Files
These are the CSV files that are divided based on either course or section. For most people, these are the CSV files you probably want to work with. The columns are:

| Column Name | Column Purpose |
| ----------- | -------------- |
| `time` | The time when this data point was collected, represented as an ISO 8601 timestamp without the timezone part. For example, `2022-08-27T04:24:26`. The timezone part is assumed to be in the timezone of the machine that is processing this data, which is always Pacific Time unless otherwise stated. |
| `enrolled` | The number of students enrolled in this section. This always shows the real number of students enrolled (as opposed to `available`). This is not shown on WebReg. |
| `available` | The number of seats *available* for enrollment. This is the exact number shown on WebReg at the time. |
| `waitlisted` | The number of students waitlisted for this section. This is the exact number shown on WebReg at the time. |
| `total` | The total number of seats available. This is the exact number shown on WebReg at the time. |

<details>
<summary>Click here for an example.</summary>
<br> 

In a `CSE 11.csv` file, you can find the enrollment data for **all** sections of CSE 11:

```
time,enrolled,available,waitlisted,total
2022-08-27T04:24:26,264,0,453,147
2022-08-27T04:33:55,264,0,453,147
2022-08-27T04:43:02,265,0,452,147
2022-08-27T04:52:07,265,0,452,147
2022-08-27T05:01:13,266,0,451,147
2022-08-27T05:10:20,269,0,448,147
2022-08-27T05:19:48,270,0,447,147
2022-08-27T05:28:56,271,0,446,147
2022-08-27T05:38:04,271,0,446,147
2022-08-27T05:47:11,271,0,446,147
2022-08-27T05:56:18,272,0,444,147
2022-08-27T06:05:25,274,0,443,147
2022-08-27T06:14:33,274,0,444,147
2022-08-27T06:23:39,275,0,443,147
2022-08-27T06:32:45,275,0,444,147
2022-08-27T06:41:53,276,0,443,147
2022-08-27T06:51:03,278,0,441,147
2022-08-27T07:00:10,279,0,440,147
... (omitted for brevity, but you get the point)
```

Another example is `CSE 11_A01.csv`, which is the enrollment data for section `A01` of CSE 11:

```
time,enrolled,available,waitlisted,total
2022-08-27T04:24:26,79,0,149,49
2022-08-27T04:33:55,79,0,149,49
2022-08-27T04:43:02,80,0,148,49
2022-08-27T04:52:07,80,0,148,49
2022-08-27T05:01:13,80,0,148,49
2022-08-27T05:10:20,82,0,146,49
2022-08-27T05:19:48,83,0,145,49
2022-08-27T05:28:56,83,0,145,49
2022-08-27T05:38:04,83,0,145,49
2022-08-27T05:47:11,83,0,145,49
2022-08-27T05:56:18,83,0,145,49
... (omitted for brevity, but you get the point)
```

</details>

## CSV Quality
Although I try my best to gather data as accurately as possible, there are still some flaws with the way I'm collecting the data, mainly due to the limitations I have to deal with while working with WebReg. Please keep the following in mind (_especially_ the last point).

### Timing
All data in the CSV files are **not** guaranteed to be gathered consistently. For example, it might take $x$ minutes to cycle through all courses today, but $x + 0.75$ minutes to cycle through all courses in two weeks. This means it's possible that, for any two consecutive data points for the same course, the time that it took to collect those data points may differ.

If you don't care too much about consistency, then this is nothing to be worried about. However, if this is something of concern, one thing you can do is simply pick specific data points to use for each day (e.g., one data point for each quarter of the day).

### Cut-Off Courses
It's possible that the raw CSV files may leave some sections for a course out (if it occurs, this will always occur at the end of the **raw** CSV files). For example, if a course has 20 sections, it's possible that some raw CSV files may **end** with only (for example) 15 sections from a cycle. This is a bug that should be resolved starting with the Fall 2022 datasets.

### Data Loss
**There may be time periods where no data is available; this is usually due to an issue with WebReg and/or my login script.**


